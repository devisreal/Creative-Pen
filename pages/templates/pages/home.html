{% extends 'base.html' %}
{% load static %}
{% block title %}
Home
{% endblock title %}
{% block styles %}
<style>
   .owl-carousel {
      position: relative;
   }

   .owl-carousel .owl-item {
      opacity: 1;
   }

   .owl-carousel .owl-item.active {
      opacity: 1;
   }

   .owl-carousel .owl-nav {
      position: absolute;
      top: 50%;
      width: 100%;
   }

   .owl-carousel .owl-nav .owl-prev,
   .owl-carousel .owl-nav .owl-next {
      position: absolute;
      -webkit-transform: translateY(-50%);
      -ms-transform: translateY(-50%);
      transform: translateY(-50%);
      margin-top: 0;
      color: white !important;
      -webkit-transition: 0.7s;
      -o-transition: 0.7s;
      transition: 0.7s;
      opacity: 1;
   }

   @media (prefers-reduced-motion: reduce) {

      .owl-carousel .owl-nav .owl-prev,
      .owl-carousel .owl-nav .owl-next {
         -webkit-transition: none;
         -o-transition: none;
         transition: none;
      }
   }

   .owl-carousel .owl-nav .owl-prev span:before,
   .owl-carousel .owl-nav .owl-next span:before {
      font-size: 30px;
   }

   .owl-carousel .owl-nav .owl-prev {
      left: 20px;
   }

   .owl-carousel .owl-nav .owl-next {
      right: 20px;
   }

   .owl-carousel .owl-dots {
      text-align: center;
      margin-top: 0;
      position: absolute;
      bottom: 20px;
      right: 0;
      left: 0;
   }

   .owl-carousel .owl-dots .owl-dot {
      width: 10px;
      height: 10px;
      margin: 5px;
      border-radius: 50%;
      background: rgba(255, 255, 255, 0.5);
      position: relative;
   }

   .owl-carousel .owl-dots .owl-dot:hover,
   .owl-carousel .owl-dots .owl-dot:focus {
      outline: none !important;
   }

   .owl-carousel .owl-dots .owl-dot.active {
      background: #d2302c;
   }

   .owl-carousel.owl-drag .owl-item {
      -ms-touch-action: pan-y;
      touch-action: pan-y;
   }

   .hero {
      position: relative;
   }

   .controls {
      border-radius: 50%;
      padding: 15px 20px;
      background-color: rgba(255, 255, 255, 0.3) !important;
      color: #fff;
      z-index: 20;
   }

   .arrow-hover {
      overflow: hidden;
   }

   .arrow-hover .owl-nav .owl-prev {
      left: -60px;
   }

   .arrow-hover .owl-nav .owl-next {
      right: -60px;
   }

   .arrow-hover:hover .owl-nav .owl-prev {
      left: 15px;
   }

   .arrow-hover:hover .owl-nav .owl-next {
      right: 15px;
   }

   .nav.nav-divider .nav-item+.nav-item:before {
      content: "\22C5";
      color: #fff;
      padding-left: 0.65rem;
      padding-right: 0.75rem;
      opacity: 1;
   }
</style>
<link rel="stylesheet" href="{% static 'css/home.css' %}">
{% endblock styles %}
{% block content %}
{% include 'partials/messages.html' %}

<header class="home-header d-grid align-content-center my-shadow border-bottom"
   style="background-image: url(../../../static/img/doodles.webp);">
   <div class="container-fluid px-0  py-md-0 my-0" style="backdrop-filter: blur(1px);">
      <div class="container py-5">
         <div class="row py-5">
            <div class="col-12 py-5 d-flex justify-content-center text-center">
               <div class="p-2">
                  <h1 class="display-5 font-bold ">
                     Thrilling topics to look out for.
                  </h1>
                  <p class="mt-2 text-lg">
                     We provide you interesting topics every day
                  </p>
               </div>
            </div>
         </div>
      </div>
   </div>
</header>

<br><br><br>

{% if featured_posts %}
   
<div class="container px-sm-0">
   <div class="row">
      <div class="col-12 mb-4">      
         <h2 class="text-center">            
            <svg width="40" height="40" viewBox="0 0 30 30" fill="none" xmlns="http://www.w3.org/2000/svg">
               <path fill-rule="evenodd" clip-rule="evenodd"
                  d="M13.948 4.25H16.052C16.9505 4.24997 17.6997 4.24995 18.2945 4.32991C18.9223 4.41432 19.4891 4.59999 19.9445 5.05546C20.4 5.51093 20.5857 6.07773 20.6701 6.70552C20.734 7.18061 20.7468 7.75423 20.7494 8.42375C21.4941 8.5639 22.1312 8.8279 22.6517 9.34835C23.2536 9.95027 23.5125 10.7081 23.6335 11.6083C23.75 12.4752 23.75 13.5775 23.75 14.9451V16.0962C23.75 17.2647 23.75 18.1991 23.6714 18.96C23.59 19.747 23.4197 20.4117 23.0406 21.0251C22.6615 21.6385 22.1431 22.0881 21.4756 22.5128C20.8303 22.9234 19.9945 23.3413 18.9493 23.8639L18.9131 23.882C18.8561 23.9105 18.7998 23.9387 18.7441 23.9665C17.153 24.7628 16.1236 25.2779 15 25.2779C13.8764 25.2779 12.847 24.7628 11.2559 23.9665C11.2002 23.9387 11.1439 23.9105 11.0869 23.882L11.0507 23.8639C10.0055 23.3413 9.16974 22.9234 8.52437 22.5128C7.85691 22.0881 7.33853 21.6385 6.95941 21.0251C6.58029 20.4117 6.41002 19.747 6.32865 18.96C6.24998 18.1991 6.24999 17.2647 6.25 16.0962L6.25 14.9451C6.24998 13.5775 6.24996 12.4752 6.36652 11.6083C6.48754 10.7081 6.74643 9.95027 7.34835 9.34835C7.8688 8.8279 8.50586 8.5639 9.25063 8.42375C9.2532 7.75423 9.26604 7.18061 9.32991 6.70552C9.41432 6.07773 9.59999 5.51093 10.0555 5.05546C10.5109 4.59999 11.0777 4.41432 11.7055 4.32991C12.3003 4.24995 13.0495 4.24997 13.948 4.25ZM10.7516 8.27562C11.3905 8.24998 12.1195 8.24999 12.9451 8.25H17.0549C17.8805 8.24999 18.6095 8.24998 19.2484 8.27562C19.2444 7.69342 19.2306 7.25606 19.1835 6.90539C19.1214 6.44393 19.0142 6.24644 18.8839 6.11612C18.7536 5.9858 18.5561 5.87858 18.0946 5.81654C17.6116 5.7516 16.964 5.75 16 5.75H14C13.036 5.75 12.3884 5.7516 11.9054 5.81654C11.4439 5.87858 11.2464 5.9858 11.1161 6.11612C10.9858 6.24644 10.8786 6.44393 10.8165 6.90539C10.7694 7.25606 10.7556 7.69342 10.7516 8.27562ZM9.80812 9.85315C9.07435 9.9518 8.68577 10.1322 8.40901 10.409C8.13225 10.6858 7.9518 11.0743 7.85315 11.8081C7.75159 12.5635 7.75 13.5646 7.75 15V16.0557C7.75 17.2739 7.75093 18.1309 7.8207 18.8058C7.88868 19.4633 8.01711 19.8833 8.23539 20.2365C8.45367 20.5897 8.7719 20.8924 9.32962 21.2472C9.902 21.6114 10.6681 21.9955 11.7577 22.5403C13.5807 23.4518 14.2744 23.7779 15 23.7779C15.7256 23.7779 16.4193 23.4518 18.2423 22.5403C19.3319 21.9955 20.098 21.6114 20.6704 21.2472C21.2281 20.8924 21.5463 20.5897 21.7646 20.2365C21.9829 19.8833 22.1113 19.4633 22.1793 18.8058C22.2491 18.1309 22.25 17.2739 22.25 16.0557V15C22.25 13.5646 22.2484 12.5635 22.1469 11.8081C22.0482 11.0743 21.8678 10.6858 21.591 10.409C21.3142 10.1322 20.9257 9.9518 20.1919 9.85315C19.4365 9.7516 18.4354 9.75 17 9.75H13C11.5646 9.75 10.5635 9.7516 9.80812 9.85315ZM15 14.0345C14.9419 14.1351 14.8772 14.251 14.801 14.3877L14.7027 14.564C14.6958 14.5765 14.6884 14.5901 14.6804 14.6047C14.6019 14.7483 14.4718 14.9861 14.255 15.1507C14.0336 15.3188 13.7673 15.3766 13.6116 15.4104C13.596 15.4138 13.5815 15.4169 13.5683 15.4199L13.3774 15.4631C13.2022 15.5028 13.0595 15.5351 12.9375 15.5658C13.0169 15.6634 13.1199 15.7847 13.254 15.9415L13.3842 16.0937C13.3934 16.1045 13.4035 16.1161 13.4141 16.1284C13.5221 16.2527 13.6963 16.4535 13.7769 16.7126C13.8566 16.9687 13.8291 17.2324 13.8118 17.3988C13.81 17.4154 13.8084 17.431 13.807 17.4456L13.7873 17.6487C13.7691 17.8369 13.7549 17.9872 13.7455 18.1094C13.8497 18.0635 13.9682 18.0089 14.109 17.9441L14.2878 17.8618C14.3001 17.8561 14.3136 17.8498 14.3281 17.8429C14.4716 17.7752 14.7213 17.6575 15 17.6575C15.2787 17.6575 15.5284 17.7752 15.6719 17.8429C15.6864 17.8498 15.6999 17.8561 15.7122 17.8618L15.891 17.9441C16.0318 18.0089 16.1503 18.0635 16.2545 18.1094C16.2451 17.9872 16.2309 17.8369 16.2127 17.6487L16.193 17.4456C16.1916 17.4311 16.19 17.4154 16.1882 17.3988C16.1709 17.2324 16.1434 16.9687 16.2231 16.7126C16.3037 16.4535 16.4779 16.2527 16.5859 16.1284C16.5966 16.1161 16.6066 16.1045 16.6158 16.0937L16.746 15.9415C16.8801 15.7847 16.9831 15.6634 17.0625 15.5658C16.9405 15.5351 16.7978 15.5028 16.6226 15.4631L16.4317 15.4199C16.4185 15.4169 16.404 15.4138 16.3884 15.4104C16.2327 15.3766 15.9664 15.3188 15.745 15.1507C15.5282 14.9861 15.3981 14.7483 15.3196 14.6047C15.3116 14.5901 15.3042 14.5765 15.2973 14.564L15.199 14.3877C15.1228 14.251 15.0581 14.1351 15 14.0345ZM14.0135 12.7996C14.1857 12.5748 14.4983 12.25 15 12.25C15.5017 12.25 15.8143 12.5748 15.9865 12.7996C16.1508 13.0142 16.3163 13.3112 16.486 13.6158C16.4937 13.6296 16.5014 13.6435 16.5091 13.6573L16.6075 13.8337C16.6303 13.8746 16.6482 13.9068 16.6639 13.9343C16.6912 13.9407 16.723 13.9479 16.7627 13.9569L16.9536 14.0001C16.9693 14.0036 16.9849 14.0072 17.0006 14.0107C17.3284 14.0848 17.6542 14.1584 17.9042 14.257C18.1804 14.3658 18.5547 14.5777 18.6989 15.0416C18.8407 15.4973 18.6618 15.8834 18.5056 16.1315C18.3611 16.3611 18.1414 16.6179 17.9165 16.8808C17.9063 16.8926 17.8961 16.9045 17.886 16.9164L17.7558 17.0686C17.7213 17.1089 17.6954 17.1394 17.6735 17.1657C17.6764 17.202 17.6805 17.2443 17.686 17.3009L17.7057 17.504C17.7072 17.5195 17.7087 17.5349 17.7102 17.5504C17.7444 17.9023 17.7774 18.2424 17.7653 18.5145C17.7526 18.7997 17.6841 19.2315 17.2969 19.5254C16.8975 19.8286 16.4564 19.7626 16.1767 19.6824C15.9189 19.6086 15.6144 19.4682 15.3077 19.3269C15.293 19.3201 15.2783 19.3134 15.2636 19.3066L15.0849 19.2243C15.0514 19.2089 15.024 19.1963 15 19.1854C14.976 19.1963 14.9486 19.2089 14.9151 19.2243L14.7364 19.3066C14.7217 19.3134 14.707 19.3201 14.6923 19.3269C14.3856 19.4682 14.081 19.6086 13.8233 19.6824C13.5436 19.7626 13.1025 19.8286 12.7031 19.5254C12.3159 19.2315 12.2474 18.7997 12.2347 18.5145C12.2226 18.2424 12.2556 17.9023 12.2898 17.5504C12.2913 17.5349 12.2928 17.5195 12.2943 17.504L12.314 17.3009C12.3195 17.2443 12.3236 17.202 12.3265 17.1657C12.3047 17.1394 12.2787 17.1089 12.2442 17.0686L12.114 16.9164C12.1039 16.9045 12.0937 16.8926 12.0835 16.8807C11.8586 16.6179 11.6389 16.3611 11.4944 16.1315C11.3382 15.8834 11.1593 15.4973 11.3011 15.0416C11.4453 14.5777 11.8196 14.3658 12.0958 14.257C12.3458 14.1584 12.6716 14.0848 12.9994 14.0107C13.0151 14.0072 13.0307 14.0036 13.0464 14.0001L13.2373 13.9569C13.277 13.9479 13.3088 13.9407 13.3361 13.9343C13.3518 13.9068 13.3697 13.8746 13.3925 13.8337L13.4909 13.6573C13.4986 13.6435 13.5063 13.6296 13.514 13.6158C13.6837 13.3112 13.8492 13.0142 14.0135 12.7996Z"
                  fill="#222" />
            </svg>
            Featured posts
         </h2>
      </div>
      <div class="col-md-12">
         <div class="hero home-featured-carousel owl-carousel arrow-hover">
            {% for post in featured_posts %}

            <div class="item">
               <div class="card card-overlay-bottom card-bg-scale h-400 h-sm-500 h-md-600 rounded-xl border-0"
                  style="background-image:url('{{post.post_image.url}}'); background-position: center left; background-size: cover;">
                  <!-- Card Image overlay -->
                  <div class="card-img-overlay d-flex align-items-center p-3 p-sm-5" style="transform: rotate(0);">
                     <div class="w-100 mt-auto" >
                        <div class="col-md-10 col-lg-7" >
                           <!-- Card category -->
                           <a href="{% url 'category' post.category.slug %}" class="badge text-bg-{{post.category.color}} mb-2 text-decoration-none font-outfit font-medium">
                              <i class="fa-solid fa-layer-group me-1"></i>{{post.category.name}}
                           </a>
                           <!-- Card title -->
                           <h2 class="text-white display-5">
                              <a href="{% url 'blog:single_post' post.slug %}" class="btn-link text-reset fw-normal stretched-link">
                                 {{post.post_title}}
                              </a>
                           </h2>
                           <p class="text-white">
                               {{post.short_description|truncatewords:30}}
                           </p>
                           <!-- Card info -->
                           <ul class="nav nav-divider text-white-force align-items-center d-none d-sm-inline-block">
                              <li class="nav-item">
                                 <div class="nav-link">
                                    <div class="d-flex align-items-center text-white position-relative">
                                       <div class="avatar avatar-sm">
                                          {% if post.post_author.profile_picture %}
                                          <img class="avatar-img rounded-circle" src="{{post.post_author.profile_picture.url}}" alt="Author avatar">
                                          {% else %}
                                             {% if post.post_author.gender == 'Male' %}
                                             <img class="avatar-img rounded-circle" src="{% static 'img/user/male.jpg' %}" alt="Author Avatar">
                                             {% elif post.post_author.gender == 'Female' %}
                                             <img class="avatar-img rounded-circle" src="{% static 'img/user/female.jpg' %}" alt="Author Avatar">
                                             {% else %}
                                             <img class="avatar-img rounded-circle" src="{% static 'img/user/custom.jpg' %}" alt="Author Avatar">
                                             {% endif %}
                                          {% endif %}
                                       </div>
                                       <span class="ms-3">by <a href="{% url 'author_external' post.post_author.slug %}" class="stretched-link text-reset btn-link">{{post.post_author.first_name}}</a></span>
                                    </div>
                                 </div>
                              </li>
                              <li class="nav-item">{{post.date_posted|date:"M d, Y"}}</li>
                              <li class="nav-item">{{post.read_time}}&nbsp;min read</li>
                           </ul>
                        </div>
                     </div>
                  </div>
               </div>
            </div>

            {% endfor %}
         </div>
      </div>
   </div>
</div>

{% endif %}

{% if popular_posts %}
   
<br><br><br>

<section class="py-0">
   <div class="container">
      <div class="row">
         <div class="col-12 mb-4">
            <h2 class="text-center">
               <svg width="40" height="40" viewBox="0 0 30 30" fill="none" xmlns="http://www.w3.org/2000/svg">
                  <path
                     d="M23 18.0002C23 22.2547 20.3819 24.1216 18.3588 24.7512C17.9274 24.8854 17.6438 24.3825 17.9019 24.0116C18.7823 22.7464 19.8 20.8161 19.8 19.0002C19.8 17.0496 18.1559 14.7467 16.8721 13.3263C16.5786 13.0016 16.0667 13.2164 16.0507 13.6539C15.9976 15.1031 15.7689 17.042 14.7828 18.5616C14.6241 18.8062 14.2872 18.8264 14.1063 18.5977C13.7982 18.208 13.4901 17.7267 13.182 17.3464C13.016 17.1416 12.716 17.1388 12.5246 17.32C11.7783 18.0267 10.7333 19.1288 10.7333 20.5002C10.7333 21.4301 11.0936 22.405 11.5001 23.1893C11.7237 23.6208 11.3261 24.1402 10.8957 23.9144C9.11307 22.9789 7 21.0838 7 18.0002C7 14.8538 11.3103 10.495 12.9561 6.37712C13.2157 5.72733 14.0161 5.42199 14.5727 5.84603C17.9439 8.41409 23 13.3783 23 18.0002Z"
                     fill="#222" />
               </svg>
               Popular posts
            </h2>
         </div>
         <div class="col-12">
            <div class="hero home-popular-carousel owl-carousel arrow-hover">
               {% for post in popular_posts %}

               <div>
                  <div class="card border-0 rounded-xl card-overlay-bottom card-img-scale">
                     <!-- Card Image -->
                     <img 
                        class="card-img" 
                        src="{{post.post_image.url}}" 
                        style="aspect-ratio: 3/4;object-fit: cover;"
                        alt=""
                     >
                     <!-- Card Image overlay -->
                     <div class="card-img-overlay d-flex flex-column p-3 p-sm-4">
                        <div>
                           <!-- Card category -->
                           <a href="{% url 'category' post.category.slug %}" class="badge text-bg-{{post.category.color}} text-decoration-none font-outfit font-medium">
                              <i class="fa-solid fa-layer-group me-1"></i>{{post.category.name}}
                           </a>
                        </div>
                        <div class="w-100 mt-auto">

                           <!-- Card title -->
                           <h4 class="text-white">
                              <a 
                                 href="{% url 'blog:single_post' post.slug %}"
                                 class="btn-link text-reset stretched-link"
                              >
                                 {{post.post_title}}
                              </a>
                           </h4>

                           <!-- Card info -->
                           <ul
                              class="nav nav-divider text-white-force align-items-center d-none d-sm-inline-block small">
                              <li class="nav-item position-relative">
                                 <div class="nav-link">by <a href="{% url 'author_external' post.post_author.slug %}" class="stretched-link text-reset btn-link">{{post.post_author.first_name}}</a>
                                 </div>
                              </li>
                              <li class="nav-item">{{post.date_posted|date:"M d, Y"}}</li>
                           </ul>
                        </div>
                     </div>
                  </div>
               </div>

               {% endfor %}
            </div>
         </div>
      </div>
   </div>
</section>

{% endif %}

<br><br><br><br>

<section class="p-0">
   <div class="container px-sm-0">
      <div class="row g-0">
         <div class="col-12 bg-light p-2 p-sm-4 rounded-3">
            <div class="d-flex justify-content-between align-items-center mb-4">
               <h2 class="m-0">Trending topics</h2>
               <a href="{% url 'categories' %}" class="link-dark btn-link  font-outfit">
                  View all categories
               </a>
            </div>

            {% if popular_categories %}
                           
            <div class="hero trending-topics-carousel owl-carousel arrow-hover">
               {% for category in popular_categories %}

               <div>
                  <div class="card border-0 card-overlay-bottom card-img-scale rounded-xl">
                     <img class="card-img" src="{{category.category_image.url}}" alt="card image"
                        style="aspect-ratio: 1/1;object-fit: cover;">
                     <div class="card-img-overlay d-flex">
                        <h5 class="mt-auto mx-auto">
                           <a href="{% url 'category' category.slug %}" class="stretched-link btn-link fw-bold text-white">
                              {{category.name}}
                           </a>
                        </h5>
                     </div>
                  </div>
               </div>

               {% endfor %}
            </div>

            {% endif %}

         </div>
      </div>
   </div>
</section>

<br><br><br><br><br>

<!-- ! Call to Action -->
<section class="pt-0 pb-0 pb-sm-0">
   <div class="container-fluid px-sm-5">
      <div class="row g-sm-5">
         <div class="col-lg-6">
            <!-- Call to action START -->
            <div class="bg-dark-overlay-4 p-3 p-sm-5 position-relative overflow-hidden h-100 call-to-action-bg">
               <div class="row">
                  <div class="col-xl-8 mx-auto text-center py-4 py-sm-5 position-relative">
                     <!-- Title -->
                     <h2 class="display-5 text-white">Never miss a story!</h2>
                     <p class="text-white">Get the freshest headlines and updates sent uninterrupted to your inbox.</p>
                     <!-- Form -->
                     <a href="{% url 'latest_posts' %}" class="btn btn-light mt-4">Read more</a>
                  </div>
               </div>
            </div>
            <!-- Call to action END -->
         </div>
         <div class="col-lg-6">
            <!-- Newsletter START -->
            <div class="bg-light position-relative overflow-hidden h-100 my-shadow-md">
               <div class="row h-100 ">
                  <div class="col-md-5 call-to-action-bg2">
                  </div>
                  <div class="col-md-7">
                     <div class="p-4 p-sm-5">
                        <!-- Title -->
                        <h2 class="display-5">Never miss a story!</h2>
                        <p>Get the freshest headlines and updates sent uninterrupted to your inbox.</p>
                        <!-- Form -->
                        <form class="row row-cols-sm-auto g-2 align-items-center mt-3" action="{% url 'footer' %}"
                           method="POST">
                           {% csrf_token %}
                           <div class="col-12">
                              <input name="email" id="email" type="email" class="form-control"
                                 placeholder="Enter your email address">
                           </div>
                           <div class="col-12">
                              <button type="submit" class="btn btn-dark  m-0">Subscribe</button>
                           </div>

                        </form>
                     </div>
                  </div>
               </div>
            </div>
            <!-- Newsletter END -->
         </div>
      </div>
   </div>
</section>

<br><br><br>
{% endblock content %}