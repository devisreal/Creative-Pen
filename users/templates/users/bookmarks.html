{% extends 'base.html' %}
{% load static %}
{% load humanize %}
{% load hitcount_tags %}
{% block title %}
Bookmarks ({{user.username}})
{% endblock title %}
{% block styles %}
{% endblock styles %}
{% block content %}
{% include 'partials/messages.html' %}





<div class="container mt-5">

   <div class="d-flex justify-content-between align-items-center">
      <h2 class="mb-2 mb-sm-0 d-flex align-items-center">
         Bookmarks
         <span class="badge bg-info bg-opacity-10 text-info text-sm ms-2 mt-1">
            {% if bookmarks %}
               {% if bookmarks.count < 10 %} 0{{bookmarks.count}} {% else %} {{bookmarks.count}} {% endif %}
            {% else %}
               0
            {% endif %}
         </span>
      </h2>
   </div>

   {% if bookmarks %}

   <div class="mt-5">
      <div class="row gy-4" data-masonry='{"percentPosition": true }'>

         {% for post in bookmarks %}


         <div class="col-sm-6 col-lg-4 ">
            <div class="card border-0 ">
               <!-- Card img -->
               <div class="position-relative ">
                  <img class="card-img pointer-events-none" src="{{post.post_image.url}}" alt="Card image">
                  <div class="card-img-overlay d-flex align-items-start flex-column p-3">
                     <!-- Card overlay Top -->
                     <div class="w-100 mb-auto d-flex justify-content-end">
                        <div class="text-end ms-auto">
                           <!-- * Post Type -->
                           {% if post.post_type == video %}
                           <div class="icon-md bg-white bg-opacity-25 bg-blur text-white rounded-circle"
                              data-bs-toggle="tooltip" data-bs-title="This post has video" data-bs-placement="right">
                              <i class="fas fa-video"></i>
                           </div>
                           {% elif post.post_type == video %}
                           <div class="icon-md bg-white bg-opacity-25 bg-blur text-white rounded-circle"
                              data-bs-toggle="tooltip" data-bs-title="This post has video" data-bs-placement="right">
                              <i class="fa-solid fa-images text-md"></i>
                           </div>
                           {% endif %}
                        </div>
                     </div>
                     <!-- Card overlay bottom -->
                     <div class="w-100 mt-auto">
                        <!-- Card category -->
                        <a href="{% url 'category' post.category.slug %}"
                           class="badge text-xs text-bg-{{post.category.color}} mb-2 text-decoration-none font-outfit font-medium">
                           <i class="fa-solid fa-layer-group me-2"></i> {{post.category}}
                        </a>
                     </div>
                  </div>
               </div>
               <div class="card-body px-0 pt-3">
                  <small class="d-flex justify-content-end mb-2">{{post.date_posted|naturalday}}</small>
                  <div class="d-flex justify-content-between">
                     <h4 class="card-title m-0 p-0 pb-2">
                        <a href="{% url 'blog:single_post' post.slug %}" class="btn-link text-reset fw-bold">
                           {{post.post_title}}
                        </a>
                     </h4>

                     <div class="w-fit col-1">
                        <!-- * Like Post -->
                        {% if request.user in post.likes.all %}
                        <a href="{% url 'users:like_post' request.user.slug post.id %}" class="text-decoration-none">
                           <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"
                              fill="none">
                              <path
                                 d="M16.44 3.10156C14.63 3.10156 13.01 3.98156 12 5.33156C10.99 3.98156 9.37 3.10156 7.56 3.10156C4.49 3.10156 2 5.60156 2 8.69156C2 9.88156 2.19 10.9816 2.52 12.0016C4.1 17.0016 8.97 19.9916 11.38 20.8116C11.72 20.9316 12.28 20.9316 12.62 20.8116C15.03 19.9916 19.9 17.0016 21.48 12.0016C21.81 10.9816 22 9.88156 22 8.69156C22 5.60156 19.51 3.10156 16.44 3.10156Z"
                                 fill="#292D32" />
                           </svg>
                        </a>
                        {% else %}
                        <a href="{% url 'users:like_post' request.user.slug post.id %}" class="text-decoration-none"
                           data-bs-toggle="tooltip" data-bs-title="Like post" data-bs-placement="bottom"
                           data-bs-offset="10,5">
                           <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"
                              fill="none">
                              <path
                                 d="M12.62 20.81C12.28 20.93 11.72 20.93 11.38 20.81C8.48 19.82 2 15.69 2 8.68998C2 5.59998 4.49 3.09998 7.56 3.09998C9.38 3.09998 10.99 3.97998 12 5.33998C13.01 3.97998 14.63 3.09998 16.44 3.09998C19.51 3.09998 22 5.59998 22 8.68998C22 15.69 15.52 19.82 12.62 20.81Z"
                                 stroke="#292D32" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round" />
                           </svg>
                        </a>
                        {% endif %}

                        <!-- * Remove Bookmark -->
                        <a href="{% url 'users:bookmark_add' request.user.slug post.id %}" class="text-decoration-none"
                           data-bs-toggle="tooltip" data-bs-title="Remove from bookmarks" data-bs-placement="bottom">
                           <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"
                              fill="none">
                              <path d="M22 2L2 22" stroke="#292D32" stroke-width="1.5" stroke-linecap="round"
                                 stroke-linejoin="round" />
                              <path d="M20.68 8.70996V19.71C20.68 21.72 19.24 22.57 17.48 21.59L11 17.54"
                                 stroke="#292D32" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round" />
                              <path
                                 d="M3.31995 19.95V5.86C3.31995 3.74 5.04995 2 7.17995 2H16.8299C18.0399 2 19.1199 2.56 19.8299 3.44"
                                 stroke="#292D32" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round" />
                           </svg>
                        </a>
                     </div>

                  </div>
                  <p class="card-text mt-2">
                     {{post.short_description|truncatewords:15}}
                  </p>
                  <!-- Card info -->
                  <ul class="nav nav-divider align-items-center just">
                     <li class="nav-item">
                        <div class="nav-link">
                           <div class="d-flex align-items-center position-relative">
                              <div class="avatar avatar-xs">
                                 {% if post.post_author.profile_picture %}
                                 <img class="avatar-img rounded-circle" src="{{post.post_author.profile_picture.url}}"
                                    alt="avatar">
                                 {% else %}
                                 <img class="avatar-img rounded-circle" src="{% static 'img/user/custom.jpg' %}"
                                    alt="avatar">
                                 {% endif %}
                              </div>
                              <span class="ms-3">by
                                 <a href="{% url 'author_external' post.post_author.slug %}"
                                    class="stretched-link text-reset btn-link" tabindex="0" data-bs-toggle="popover"
                                    data-bs-trigger="hover focus" data-bs-delay="500" data-bs-html="true"
                                    data-bs-container="body" data-bs-offset="10,20" data-bs-placement="bottom"
                                    data-bs-content="
                                                   <div class='custom-popover-content'>
                                                      <div class='d-flex justify-content-between align-items-center'>
                                                         <h6 class='font-cabin font-medium m-0 p-0'>
                                                            <a 
                                                               href='{% url 'author_external' post.post_author.slug %}'
                                                               class='text-reset btn-link'
                                                            >
                                                               {{post.post_author.get_full_name}}
                                                            </a>
                                                         </h6>
                                                         <small class='font-outfit text-sm text-gray-500'>@{{post.post_author.get_username}}</small>
                                                      </div>
                                                      <p class='font-light font-outfit text-sm m-0 p-0 mt-2'>
                                                         {{post.post_author.bio|truncatewords:10}}
                                                      </p>
                                                      <hr class='m-0 p-0 my-2'>
                                                      <div class='d-flex justify-content-between align-items-center'>
                                                         <p class='m-0 p-0'>573 Followers</p>
                                                         <a 
                                                            href=''
                                                            class='font-medium font-outfit text-xs btn btn-blue btn-sm rounded-pill'
                                                         >
                                                            Follow
                                                         </a>
                                                      </div>
                                                   </div>
                                                ">
                                    {{post.post_author.get_short_name}}
                                 </a>
                              </span>
                           </div>
                        </div>
                     </li>
                     <li class="nav-item">
                        <a href="#" class="btn-link">
                           <i class="fa-regular fa-heart me-1"></i> {{post.likes.count}}
                        </a>
                     </li>
                     <li class="nav-item">
                        <a href="#" class="btn-link">
                           <i class="fa-regular fa-comments me-1"></i> 5
                        </a>
                     </li>
                     <li class="nav-item">
                        <a href="#" class="btn-link">
                           <i class="fa-regular fa-eye me-1"></i> {% get_hit_count for post %}
                        </a>
                     </li>
                  </ul>
               </div>
            </div>
         </div>

         {% endfor %}
      </div>
   </div>

   {% else %}

   <div class="d-grid justify-content-center py-5">
      <svg xmlns="http://www.w3.org/2000/svg" class="mx-auto" width="70" height="70" fill="#dc2626" viewBox="0 0 24 24">
         <path
            d="M11.953 2C6.465 2 2 6.486 2 12s4.486 10 10 10 10-4.486 10-10S17.493 2 11.953 2zM12 20c-4.411 0-8-3.589-8-8s3.567-8 7.953-8C16.391 4 20 7.589 20 12s-3.589 8-8 8z">
         </path>
         <path d="M11 7h2v7h-2zm0 8h2v2h-2z"></path>
      </svg>
      <h4 class="text-center mt-3">No Bookmarks</h4>
      <p>You have no post in your bookmarks.</p>
   </div>

   {% endif %}

</div>

<br><br><br><br><br>
{% endblock %}